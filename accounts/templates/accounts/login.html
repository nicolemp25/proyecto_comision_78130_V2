{% extends "coder/index.html" %}
{% block titulo %}Iniciar sesi칩n{% endblock %}

{% block contenido %}
<div class="container py-5 d-flex justify-content-center">
  <div class="card shadow-sm border-0" style="max-width:440px;width:100%;border-radius:16px;">
    <div class="card-body p-4 p-md-5">
      <h4 class="fw-bold text-center mb-4">Iniciar sesi칩n</h4>

      {% if form.non_field_errors %}
        <div class="alert alert-danger py-2">{{ form.non_field_errors }}</div>
      {% endif %}

      <form method="post" novalidate>
        {% csrf_token %}
        {% if next %}<input type="hidden" name="next" value="{{ next }}">{% endif %}

        <!-- Usuario -->
        <div class="form-floating mb-3">
          <input type="text"
                 name="username"
                 id="id_username"
                 class="form-control"
                 placeholder=" "
                 value="{{ form.username.value|default_if_none:'' }}">
          <label for="id_username">Usuario</label>
        </div>

        <!-- Contrase침a -->
        <div class="form-floating mb-2 position-relative">
          <input type="password"
                 name="password"
                 id="id_password"
                 class="form-control"
                 placeholder=" ">
          <label for="id_password">Contrase침a</label>
          <button type="button"
                  class="btn btn-sm btn-outline-secondary position-absolute top-50 end-0 translate-middle-y me-2"
                  id="togglePwd">Mostrar</button>
        </div>

        <div class="d-flex justify-content-between align-items-center mb-4">
          <div class="form-check">
            <input class="form-check-input" type="checkbox" id="remember">
            <label class="form-check-label" for="remember">Recordarme</label>
          </div>
          <!-- 游댕 Enlace corregido -->
          <a class="small text-muted" href="{% url 'forgot_password' %}">
            쯆lvidaste tu contrase침a?
          </a>
        </div>

        <button class="btn btn-primary w-100 py-2">Entrar</button>

        <div class="text-center mt-3">
          <span class="text-muted">쯅o tienes cuenta?</span>
          <a href="{% url 'register' %}">Reg칤strate</a>
        </div>
      </form>
    </div>
  </div>
</div>

<script>
  // Toggle mostrar/ocultar contrase침a
  (function(){
    const btn = document.getElementById('togglePwd');
    const input = document.getElementById('id_password');
    if(btn && input){
      btn.addEventListener('click', () => {
        const show = input.type === 'password';
        input.type = show ? 'text' : 'password';
        btn.textContent = show ? 'Ocultar' : 'Mostrar';
      });
    }
  })();
</script>
{% endblock %}
